!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("sceneBlocking",[],t):"object"==typeof exports?exports.sceneBlocking=t():e.sceneBlocking=t()}(self,(function(){return(()=>{"use strict";var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{DefaultAnimationConfig:()=>s,DefaultLine:()=>i,DefaultPropConfig:()=>n,ExcludeKeys:()=>o,PropType:()=>r,PropTypeIcons:()=>a,Scene:()=>te,camelToDisplay:()=>y,convertTypeToReadable:()=>d,createDialog:()=>I,createElement:()=>p,createIconFontElement:()=>b,createSVGElement:()=>_,createSVGIcon:()=>T,createSpan:()=>v,demo:()=>se,extractPathD:()=>L,flatObject:()=>R,forEachPathHTML:()=>C,generateDarkColor:()=>g,generateLightColor:()=>f,getLineGroup:()=>P,getPathGroupByHTML:()=>S,getRandomFromList:()=>m,positionToDisplay:()=>O,randBoolean:()=>u,randInclusive:()=>h,setClassList:()=>x,setStyles:()=>E});const s={degree:0,scaleX:1,scaleY:1,hide:!1,enabled:!0},i={color:"var(--scene-base-inv-s2)",width:1},n={style:"default",shouldDisplayName:!0,orderIndex:0,namePosition:"top",nameScale:1,nameXOffset:0,nameYOffset:0,excludeKeys:[]},o=["name","color","type","frameAnimationConfig","script","steps","note","shouldDisplayName","id","images","orderIndex","namePosition","nameScale","nameXOffset","nameYOffset","excludeKeys","nameColor"];var r;!function(e){e.TABLE="TABLE",e.LIGHT="LIGHT",e.CHARACTER="CHARACTER",e.CAMERA="CAMERA",e.DISPLAY="DISPLAY",e.SHELF="SHELF",e.MAP="MAP",e.SCRIPT="SCRIPT",e.STORYBOARD="STORYBOARD"}(r||(r={}));const a={TABLE:{default:{enabledPaths:'<path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/>',disabledPaths:'<path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/>\n  <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"/>'},triangle:{enabledPaths:'<path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/>',disabledPaths:'<path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/>\n  <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"/>'},fillTriangle:{enabledPaths:'<path fill-rule="evenodd" d="M7.022 1.566a1.13 1.13 0 0 1 1.96 0l6.857 11.667c.457.778-.092 1.767-.98 1.767H1.144c-.889 0-1.437-.99-.98-1.767L7.022 1.566z"/>',disabledPaths:'<path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>'},square:{enabledPaths:'<path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>',disabledPaths:'<path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n  <path d="M11.354 4.646a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708l6-6a.5.5 0 0 1 .708 0z"/>'},fillSquare:{enabledPaths:'<path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2z"/>',disabledPaths:'<path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm9.354 5.354-6 6a.5.5 0 0 1-.708-.708l6-6a.5.5 0 0 1 .708.708z"/>'}},LIGHT:{default:{enabledPaths:'<path d="M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a1.964 1.964 0 0 0-.453-.618A5.984 5.984 0 0 1 2 6zm6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1z"/>',disabledPaths:'<path fill-rule="evenodd" d="M2.23 4.35A6.004 6.004 0 0 0 2 6c0 1.691.7 3.22 1.826 4.31.203.196.359.4.453.619l.762 1.769A.5.5 0 0 0 5.5 13a.5.5 0 0 0 0 1 .5.5 0 0 0 0 1l.224.447a1 1 0 0 0 .894.553h2.764a1 1 0 0 0 .894-.553L10.5 15a.5.5 0 0 0 0-1 .5.5 0 0 0 0-1 .5.5 0 0 0 .288-.091L9.878 12H5.83l-.632-1.467a2.954 2.954 0 0 0-.676-.941 4.984 4.984 0 0 1-1.455-4.405l-.837-.836zm1.588-2.653.708.707a5 5 0 0 1 7.07 7.07l.707.707a6 6 0 0 0-8.484-8.484zm-2.172-.051a.5.5 0 0 1 .708 0l12 12a.5.5 0 0 1-.708.708l-12-12a.5.5 0 0 1 0-.708z"/>'},lightning:{enabledPaths:'<path d="M11.251.068a.5.5 0 0 1 .227.58L9.677 6.5H13a.5.5 0 0 1 .364.843l-8 8.5a.5.5 0 0 1-.842-.49L6.323 9.5H3a.5.5 0 0 1-.364-.843l8-8.5a.5.5 0 0 1 .615-.09zM4.157 8.5H7a.5.5 0 0 1 .478.647L6.11 13.59l5.732-6.09H9a.5.5 0 0 1-.478-.647L9.89 2.41 4.157 8.5z"/>',disabledPaths:'<path d="M11.251.068a.5.5 0 0 1 .227.58L9.677 6.5H13a.5.5 0 0 1 .364.843l-8 8.5a.5.5 0 0 1-.842-.49L6.323 9.5H3a.5.5 0 0 1-.364-.843l8-8.5a.5.5 0 0 1 .615-.09z"/>'}},CHARACTER:{default:{enabledPaths:'<path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>\n  <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>',disabledPaths:'<path fill-rule="evenodd" d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm6.146-2.854a.5.5 0 0 1 .708 0L14 6.293l1.146-1.147a.5.5 0 0 1 .708.708L14.707 7l1.147 1.146a.5.5 0 0 1-.708.708L14 7.707l-1.146 1.147a.5.5 0 0 1-.708-.708L13.293 7l-1.147-1.146a.5.5 0 0 1 0-.708z"/>'}},CAMERA:{default:{enabledPaths:'<path fill-rule="evenodd" d="M0 5a2 2 0 0 1 2-2h7.5a2 2 0 0 1 1.983 1.738l3.11-1.382A1 1 0 0 1 16 4.269v7.462a1 1 0 0 1-1.406.913l-3.111-1.382A2 2 0 0 1 9.5 13H2a2 2 0 0 1-2-2V5zm11.5 5.175 3.5 1.556V4.269l-3.5 1.556v4.35zM2 4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h7.5a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1H2z"/>',disabledPaths:'<path fill-rule="evenodd" d="M10.961 12.365a1.99 1.99 0 0 0 .522-1.103l3.11 1.382A1 1 0 0 0 16 11.731V4.269a1 1 0 0 0-1.406-.913l-3.111 1.382A2 2 0 0 0 9.5 3H4.272l.714 1H9.5a1 1 0 0 1 1 1v6a1 1 0 0 1-.144.518l.605.847zM1.428 4.18A.999.999 0 0 0 1 5v6a1 1 0 0 0 1 1h5.014l.714 1H2a2 2 0 0 1-2-2V5c0-.675.334-1.272.847-1.634l.58.814zM15 11.73l-3.5-1.555v-4.35L15 4.269v7.462zm-4.407 3.56-10-14 .814-.58 10 14-.814.58z"/>'}},DISPLAY:{default:{enabledPaths:'<path d="M0 4s0-2 2-2h12s2 0 2 2v6s0 2-2 2h-4c0 .667.083 1.167.25 1.5H11a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1h.75c.167-.333.25-.833.25-1.5H2s-2 0-2-2V4zm1.398-.855a.758.758 0 0 0-.254.302A1.46 1.46 0 0 0 1 4.01V10c0 .325.078.502.145.602.07.105.17.188.302.254a1.464 1.464 0 0 0 .538.143L2.01 11H14c.325 0 .502-.078.602-.145a.758.758 0 0 0 .254-.302 1.464 1.464 0 0 0 .143-.538L15 9.99V4c0-.325-.078-.502-.145-.602a.757.757 0 0 0-.302-.254A1.46 1.46 0 0 0 13.99 3H2c-.325 0-.502.078-.602.145z"/>',disabledPaths:'<path d="M6 12c0 .667-.083 1.167-.25 1.5H5a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1h-.75c-.167-.333-.25-.833-.25-1.5h4c2 0 2-2 2-2V4c0-2-2-2-2-2H2C0 2 0 4 0 4v6c0 2 2 2 2 2h4z"/>'}},SHELF:{default:{enabledPaths:'<path d="M2.5 0a.5.5 0 0 1 .5.5V2h10V.5a.5.5 0 0 1 1 0v15a.5.5 0 0 1-1 0V15H3v.5a.5.5 0 0 1-1 0V.5a.5.5 0 0 1 .5-.5zM3 14h10v-3H3v3zm0-4h10V7H3v3zm0-4h10V3H3v3z"></path>',disabledPaths:'<path d="M2.5 0a.5.5 0 0 1 .5.5V2h10V.5a.5.5 0 0 1 1 0v15a.5.5 0 0 1-1 0V15H3v.5a.5.5 0 0 1-1 0V.5a.5.5 0 0 1 .5-.5zM3 14h10v-3H3v3zm0-4h10V7H3v3zm0-4h10V3H3v3z"></path>'}},MAP:{default:{enabledPaths:'<path fill-rule="evenodd" d="M3.1 11.2a.5.5 0 0 1 .4-.2H6a.5.5 0 0 1 0 1H3.75L1.5 15h13l-2.25-3H10a.5.5 0 0 1 0-1h2.5a.5.5 0 0 1 .4.2l3 4a.5.5 0 0 1-.4.8H.5a.5.5 0 0 1-.4-.8l3-4z"></path><path fill-rule="evenodd" d="M4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999z"></path>',disabledPaths:'<path fill-rule="evenodd" d="M3.1 11.2a.5.5 0 0 1 .4-.2H6a.5.5 0 0 1 0 1H3.75L1.5 15h13l-2.25-3H10a.5.5 0 0 1 0-1h2.5a.5.5 0 0 1 .4.2l3 4a.5.5 0 0 1-.4.8H.5a.5.5 0 0 1-.4-.8l3-4z"></path><path fill-rule="evenodd" d="M8 1a3 3 0 1 0 0 6 3 3 0 0 0 0-6zM4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999z"></path>'}},STORYBOARD:{default:{enabledPaths:'<path d="M0 2.5A1.5 1.5 0 0 1 1.5 1h11A1.5 1.5 0 0 1 14 2.5v10.528c0 .3-.05.654-.238.972h.738a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 1 1 0v9a1.5 1.5 0 0 1-1.5 1.5H1.497A1.497 1.497 0 0 1 0 13.5v-11zM12 14c.37 0 .654-.211.853-.441.092-.106.147-.279.147-.531V2.5a.5.5 0 0 0-.5-.5h-11a.5.5 0 0 0-.5.5v11c0 .278.223.5.497.5H12z"/>\n  <path d="M2 3h10v2H2V3zm0 3h4v3H2V6zm0 4h4v1H2v-1zm0 2h4v1H2v-1zm5-6h2v1H7V6zm3 0h2v1h-2V6zM7 8h2v1H7V8zm3 0h2v1h-2V8zm-3 2h2v1H7v-1zm3 0h2v1h-2v-1zm-3 2h2v1H7v-1zm3 0h2v1h-2v-1z"/>',disabledPaths:'<path d="M0 2.5A1.5 1.5 0 0 1 1.5 1h11A1.5 1.5 0 0 1 14 2.5v10.528c0 .3-.05.654-.238.972h.738a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 1 1 0v9a1.5 1.5 0 0 1-1.5 1.5H1.497A1.497 1.497 0 0 1 0 13.5v-11zM12 14c.37 0 .654-.211.853-.441.092-.106.147-.279.147-.531V2.5a.5.5 0 0 0-.5-.5h-11a.5.5 0 0 0-.5.5v11c0 .278.223.5.497.5H12z"/>\n  <path d="M2 3h10v2H2V3zm0 3h4v3H2V6zm0 4h4v1H2v-1zm0 2h4v1H2v-1zm5-6h2v1H7V6zm3 0h2v1h-2V6zM7 8h2v1H7V8zm3 0h2v1h-2V8zm-3 2h2v1H7v-1zm3 0h2v1h-2v-1zm-3 2h2v1H7v-1zm3 0h2v1h-2v-1z"/>'}},SCRIPT:{default:{enabledPaths:"",disabledPaths:""}}};class c{constructor(e){this._components=[],this._componentsActions=[],this._state=e}get(){return this._state}getPrevious(){return this._previous_state}render(){this._components.forEach((e=>{e.renderComponent()}))}set(e,t){(t||e!==this._state)&&(this._componentsActions.forEach((([,t])=>{t&&t(this.get(),e,this._previous_state)})),this._previous_state=this._state,this._state=e,this._componentsActions.forEach((([,,e])=>{e&&e(this._previous_state,this.get())})),this.render())}subscribe(e){this._components.push(e)}subscribeActions(e,t,s){this._componentsActions.push([e,t,s])}}function l(e){return new c(e)}function d(e){return`${e.charAt(0).toUpperCase()}${e.slice(1).toLowerCase()}`}function p(e){const t=document.createElement("template");return t.innerHTML=e.trim(),t.content.children[0]}function h(e,t){return Math.floor(Math.random()*(t-e+1))+e}function u(){return!!h(0,1)}function m(e){return e[h(0,e.length-1)]}function g(){const e=()=>h(0,125);return`rgb(${e()},${e()},${e()})`}function f(){const e=()=>h(125,255);return`rgb(${e()},${e()},${e()})`}function _(e,t){const s=document.createElementNS("http://www.w3.org/2000/svg","svg");return s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttribute("width",String(e)),s.setAttribute("height",String(t)),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}function b(e,...t){const s=document.createElement("i");return e&&(s.id=e),t.forEach((e=>s.classList.add(e))),s}function T(e){const t=_(16,16);return t.setAttribute("transform",`scale(${e} ${e})`),t}function x(e,...t){e.removeAttribute("class"),e.classList.add(...t)}function P(e,t,s,i,n,o){return`<g stroke-width="${n}" stroke="${o}"><path d="M${e} ${t}  L${s} ${i}"/></g>`}function E(e,t,...s){s.forEach((s=>{s&&(s.style[e]=t)}))}function O(e){const t=Object.assign({},e);for(let e in t){const s=t[e];"number"==typeof s&&(t[e]=e.includes("scale")?Math.round(10*s)/10:Math.round(s))}return t}function y(e){return(e=e.charAt(0).toUpperCase()+e.slice(1)).replace(/[A-Z]/g,(e=>` ${e}`)).trim()}function v(e,t){const s=document.createElement("span");return s.innerText=e,s.style.color=t||"black",s}function S(e,t,s){const i=document.createElementNS("http://www.w3.org/2000/svg","g");return C(e,(e=>{let t=(new DOMParser).parseFromString(e,"image/svg+xml").firstChild;i.appendChild(t)})),i}function C(e,t){e.match(/<path.*?\/>|<path.*?><\/path>/g).forEach((e=>{t(e)}))}function L(e){const t=e.match(/d=["'`](.*?)["'`]/);return null==t?"":t[1]}function R(e){const t={},s=(e,i)=>{Object.keys(e).sort().forEach((n=>{const o=i;i+=`.${n}`,"object"==typeof e[n]?s(e[n],i):t[i.slice(1)]=e[n],i=o}))};return s(e,""),t}function I(e,t){return`<div class="modal">\n                <div class="modal__header">\n                <span class="modal__header__title">${e}</span><span class="bi bi-x modal__header__close"></span>\n                </div>\n                <div class="modal__content">\n                ${"string"==typeof t?t:t.outerHTML}\n                </div>\n            </div>`}class A extends class{mount(){this.listen().forEach((e=>{e.subscribe(this)})),this.actions().forEach((([e,t,s])=>{(t||s)&&e.subscribeActions(this,t,s)}))}listen(){return[]}renderComponent(){this.renderInIds().forEach((e=>{const t=this.render(),s=document.getElementById(e);Array.isArray(t)?s.innerHTML=t.join(""):"string"==typeof t?s.innerHTML=t:(s.innerHTML="",s.append(t))})),this.afterRender()}actions(){return[]}renderInIds(){return[]}afterConstructor(){}hook(e,t){this.hookedComponents[e]=t}}{constructor(e){super(),this.scene=e,[this.ids,this.idCtx]=[this.scene.ids,this.scene.idContext],this.snackbarCtx=this.scene.snackbarCtx,this.overlayCtx=this.scene.overlayCtx,this.themeCtx=this.scene.themeCtx,this.propCtx=this.scene.propCtx,this.getViewportCtx=this.scene.getViewportGetter(),this.afterConstructor(),this.mount()}}var w;!function(e){e[e.IMAGES=0]="IMAGES",e[e.GENERAL=1]="GENERAL",e[e.STEPS=2]="STEPS",e[e.SCRIPTS=3]="SCRIPTS",e[e.DEBUG=4]="DEBUG"}(w||(w={}));class B extends A{afterConstructor(){this.selectedTabState=l(w.GENERAL)}listen(){return[this.propCtx.selectedPropState,this.propCtx.propsState,this.selectedTabState]}renderInIds(){return[this.ids.ROOT_PROP_DIALOG]}actions(){return[[this.propCtx.selectedPropState,()=>{this.selectedTabState.set(w.GENERAL)}],[this.scene.propCtx.currentFrameState,(e,t)=>{const s=this.propCtx.selectedProp;if(s){const i=document.getElementById(this.idCtx.PROP_DIALOG_FOOTER_POSITION(s)),n=document.getElementById(this.idCtx.PROP_DIALOG_FOOTER_SCALE(s));this.updatePositionScaleElements(i,n,s,t,t<e)}}]]}updatePositionScaleElements(e,t,s,i,n){const o=O(null==i?this.propCtx.getPropPositionByCurrentFrame(s):this.propCtx.getPropPositionByFrame(s,i,n));e&&(e.innerText=`(${o.x}, ${o.y}, ${o.degree}°)`,e.style.color=s.color),t&&(t.innerText=`(${o.scaleX}x, ${o.scaleY}x)`,t.style.color=s.color)}afterRender(){const e=e=>{const[t]=this.idCtx.extractIdType(e.target.id);this.propCtx.toggleSelected(t)};this.scene.$(".prop__dialog__close").on("click",(t=>{e(t)})),this.scene.$(".prop__dialog").on("click",(()=>{this.propCtx.clearSelectedProp()})),this.scene.$(".prop__dialog--popup").on("click",(e=>{e.stopPropagation()})),this.scene.$(".header span").on("click",(e=>{this.selectedTabState.set(this.idCtx.extractIdType(e.target.id)[0])})),this.scene.$(".content .image__container img").on("click",(e=>{this.overlayCtx.openWith(`<img src='${e.target.getAttribute("src")}' alt=""/>`)}))}render(){const e=this.propCtx.selectedProp;if(e){const t="popup"===this.scene.config.dialog,s=document.createElement("div");t&&s.classList.add("prop__dialog");const i=document.createElement("div");i.classList.add("prop__dialog--"+(t?"popup":"embedded"),this.scene.isRootMobile()?"prop__dialog--embedded--mobile":"prop__dialog--embedded--normal"),s.appendChild(i);const n=document.createElement("div");n.classList.add("header");const r=(e,t,s,...i)=>{if(this.scene.config.alwaysShowAllDialogTabs||s){const s=document.createElement("span"),o=document.createElement("span");o.innerText=t,s.append(o),s.classList.add(...i,"tooltip","header__tab"),s.id=this.idCtx.PROP_DIALOG_HEADER_TAB(e),s.classList.add(this.selectedTabState.get()===e?"header__button--selected":"header__button--not-selected"),n.append(s)}};r(w.GENERAL,"General Information",!0,"bi","bi-boxes"),r(w.SCRIPTS,"Scripts",e.script,"bi","bi-journal-bookmark-fill"),r(w.STEPS,"Steps",e.steps,"bi","bi-123"),r(w.IMAGES,"Images",e.images,"bi","bi-image-fill"),r(w.DEBUG,"Debug Information",this.scene.config.dialogShowAllProperties,"bi","bi-bug");const a=document.createElement("div");a.classList.add("content");const c=(e,t,s)=>{const i=document.createElement("span"),n=document.createElement("span"),o=document.createElement("span");return n.innerHTML=s?`【${y(String(e))}】 `:`【${String(e)}】 `,n.classList.add("content__key"),o.innerHTML=String(t),o.classList.add("content__value"),i.classList.add("content__key-value"),i.append(n,o),i},l=e=>{const t=document.createElement("div");t.classList.add("image__container","bottom-gray-border");const s=document.createElement("img"),i=document.createElement("span");return i.innerText=e.title?e.title:"",i.classList.add("content-text--normal"),t.append(i),s.src=e.imageURL,t.append(s),t},d=(e,t)=>{const s=document.createElement("div");s.classList.add("step-card","bottom-gray-border");const i=document.createElement("div"),n=document.createElement("span");n.innerText=String(e),n.classList.add("step-card__step");const o=document.createElement("span");o.innerText=t.title?t.title:"",o.classList.add("content-text--normal"),i.append(n,o);const r=document.createElement("span");return r.innerText=t.content?t.content:"",r.classList.add("content-text--normal"),s.append(i,r),s};switch(this.selectedTabState.get()){case w.GENERAL:for(let t in e)o.includes(t)||e.excludeKeys.includes(t)||a.append(c(t,e[t]));e.note&&a.append(c("Note",e.note));break;case w.SCRIPTS:if(e.script){const t=document.createElement("span");t.innerText=e.script,t.classList.add("content-text--normal"),a.append(t)}break;case w.IMAGES:e.images&&e.images.forEach((e=>{a.append(l(e))}));break;case w.STEPS:e.steps&&Object.keys(e.steps).sort(((e,t)=>Number(e)-Number(t))).forEach((t=>{a.append(d(Number(t),e.steps[t]))}));break;case w.DEBUG:switch(this.scene.config.dialogAllPropertiesFormat){case"flat":const t=R(e);for(let e in t)a.append(c(e,t[e],!1));break;case"json":const s=document.createElement("p");s.innerText=JSON.stringify(e,null,2),s.classList.add("content-text--normal"),a.append(s)}}const p=document.createElement("div");p.classList.add("footer");const h=document.createElement("i");h.id=this.idCtx.PROP_DIALOG_CLOSE_ICON(e),h.classList.add("bi","bi-x","pointer","prop__dialog__close"),n.appendChild(h);const u=this.propCtx.getPropSVG(e);u.id=this.idCtx.PROP_DIALOG_FOOTER_ICON(e);const m=document.createElement("span");m.innerText=e.name,m.style.color=e.color;const g=document.createElement("span"),f=document.createElement("span");return this.updatePositionScaleElements(g,f,e),g.id=this.idCtx.PROP_DIALOG_FOOTER_POSITION(e),f.id=this.idCtx.PROP_DIALOG_FOOTER_SCALE(e),p.append(u,m,g,f),i.append(n,a,p),s.outerHTML}return""}}class M{constructor(e,t){this.progressFinished=e,this.progressUnfinished=t}static setStyles(e,t,s,i){e.style.width=t,e.style.transitionDuration=s,"0s"==s?e.classList.add("no-transition"):e.classList.remove("no-transition"),i&&(e.style.transitionTimingFunction=i)}full(){M.setStyles(this.progressFinished,"100%","0s"),M.setStyles(this.progressUnfinished,"0%","0s")}reset(){M.setStyles(this.progressFinished,"0%","0s"),M.setStyles(this.progressUnfinished,"100%","0s")}setTransition(e,t,s){M.setStyles(this.progressFinished,s?"100%":"0%",e,t),M.setStyles(this.progressUnfinished,s?"0%":"100%",e,t)}}class H extends A{constructor(){super(...arguments),this.timeouts=[]}afterConstructor(){this.open=l(!0),this.playing=l(!1)}listen(){return[]}getProgressBars(e){const t=document.getElementById(this.idCtx.FRAME_PROGRESS_FINISHED(e)),s=document.getElementById(this.idCtx.FRAME_PROGRESS_UNFINISHED(e));return s&&t?new M(t,s):null}actions(){const e=(e,t)=>{const s=document.getElementById(this.idCtx.TIMELINE_FRAME(e));s.classList.remove(t?"timeline__frame--not-selected":"timeline__frame--selected"),s.classList.add(t?"timeline__frame--selected":"timeline__frame--not-selected")};return[[this.themeCtx.currentState,null,()=>{const e=this.themeCtx.currentTheme,t=document.getElementById(this.ids.TOOLBAR_THEME_BUTTON),s=t.querySelector("i"),i=t.parentElement.querySelector("span");s&&x(s,...e.icon.split(" ")),i&&(i.innerText=`Theme (${this.themeCtx.themeToDisplay})`)}],[this.open,(e,t)=>{const s=document.getElementById(this.ids.TOOLBAR);if(s){const e=t?0:-(s.getBoundingClientRect().height-45);s.style.bottom=`${e}px`}}],[this.playing,(e,t)=>{const s=document.getElementById(this.ids.TOOLBAR_PLAY_BUTTON),i=s.querySelector("i"),n=s.parentElement.querySelector("span");t?(x(i,"bi","bi-pause-fill"),n.innerText="Pause"):(x(i,"bi","bi-play-fill"),n.innerText="Play")}],[this.scene.propCtx.currentFrameState,(t,s,i)=>{if(console.log(`Frame: ${i} | ${t} -> ${s}`),null==t)return;const n=this.scene.getFrameSeconds(t);if(this.propCtx.ifJumpOneLiterally(t,s)){if(e(t,!0),this.timeouts.push(setTimeout((()=>{e(s,!0)}),1e3*n)),null==i||this.propCtx.ifJumpOne(i,t)){const e=this.getProgressBars(t-1);e&&e.full()}const o=this.getProgressBars(t);o&&o.setTransition(n+"s",this.scene.config.transitionTimingFunction,!0)}else{this.timeouts.forEach((e=>{clearTimeout(e)}));for(let t=1;t<=this.propCtx.totalFrames;t++){e(t,!1);const s=this.getProgressBars(t);s&&s.reset()}e(s,!0)}}]]}renderInIds(){return[this.ids.ROOT_FOOTER]}afterRender(){this.open.set(this.scene.config.defaultOpenToolbar);const e=(e,t)=>{this.scene.$(`#${t}`).on("click",(s=>{e(document.getElementById(t),s)}))};this.scene.$(".timeline__frame").on("click",(e=>{const[t]=this.idCtx.extractIdType(e.target.id);this.scene.propCtx.currentFrame=t})),e((()=>{this.open.set(!this.open.get())}),this.ids.TOOLBAR_COLLAPSE_BUTTON),e((()=>{this.scene.viewComponent.resetViewport(),this.snackbarCtx.snackbar("Reset Viewport - Frames Based")}),this.ids.TOOLBAR_RESET_FRAMES_BUTTON),e((()=>{this.scene.viewComponent.resetViewport(this.scene.propCtx.currentFrame),this.snackbarCtx.snackbar("Reset Current Viewport")}),this.ids.TOOLBAR_RESET_CURRENT_BUTTON);const t=()=>{if(this.playing.get()){const e=this.scene.propCtx.nextFrame();setTimeout((()=>{t()}),1e3*this.scene.getFrameSeconds(e))}};e((()=>{this.playing.set(!this.playing.get()),this.playing.get()&&t()}),this.ids.TOOLBAR_PLAY_BUTTON),e((()=>{navigator.clipboard.writeText(JSON.stringify(this.scene.config,null,2)).then((()=>this.snackbarCtx.snackbar("Copied to clipboard")))}),this.ids.TOOLBAR_EXPORT_BUTTON),e((()=>{this.themeCtx.next()}),this.ids.TOOLBAR_THEME_BUTTON),e((e=>{e.parentElement.querySelector("span").classList.remove("toolbar__tooltip--visible"),document.fullscreenElement?document.exitFullscreen().then():this.scene.getRootDocument().requestFullscreen().then()}),this.ids.TOOLBAR_FULLSCREEN)}render(){const e=document.createElement("div"),t=document.createElement("div");t.id=this.ids.TOOLBAR,t.classList.add("toolbar");const s=(e,s,i)=>{const n=document.createElement("div");n.classList.add("tooltip","toolbar__button-container");const o=document.createElement("div");o.id=i,o.classList.add("button","toolbar__button","pointer");const r=document.createElement("i");r.classList.add(...s.split(" ")),o.append(r);const a=document.createElement("span");a.innerText=e,n.append(o,a),t.append(n)},i=this.scene.propCtx.currentFrame;if(s("Collapse/Expand","bi bi-arrows-collapse",this.ids.TOOLBAR_COLLAPSE_BUTTON),s("Toggle fullscreen mode","bi bi-arrows-fullscreen",this.ids.TOOLBAR_FULLSCREEN),s("Reset viewport (based on current frame)","bi bi-arrows-move",this.ids.TOOLBAR_RESET_CURRENT_BUTTON),this.propCtx.isStatic||s("Reset viewport (based on all frames)","bi bi-bootstrap-reboot",this.ids.TOOLBAR_RESET_FRAMES_BUTTON),s("Export","bi bi-box-arrow-up-right",this.ids.TOOLBAR_EXPORT_BUTTON),s(`Theme (${this.themeCtx.themeToDisplay})`,this.themeCtx.currentTheme.icon,this.ids.TOOLBAR_THEME_BUTTON),this.scene.config.displayToolbar&&e.append(t),!this.scene.propCtx.isStatic){const t=document.createElement("div");t.classList.add("timeline-container"),this.scene.config.displayToolbar||t.classList.add("timeline-container-full-width");for(let e=0;e<this.propCtx.totalFrames;e++){const s=e+1,n=document.createElement("div");n.classList.add("timeline__frame-container"),s!=this.propCtx.totalFrames&&(n.style.flexGrow=String(Math.floor(10*this.scene.getFrameSeconds(s))));const o=document.createElement("div");o.classList.add("progress-container");const r=document.createElement("div"),a=document.createElement("div");r.classList.add("progress","progress-finished"),a.classList.add("progress","progress-not"),r.id=this.idCtx.FRAME_PROGRESS_FINISHED(s),a.id=this.idCtx.FRAME_PROGRESS_UNFINISHED(s),o.append(r,a),n.append(o);const c=document.createElement("div");c.id=this.idCtx.TIMELINE_FRAME(s),c.classList.add("timeline__frame",i===s?"timeline__frame--selected":"timeline__frame--not-selected","pointer"),c.innerText=String(s),n.append(c),t.append(n)}s("Play",this.playing.get()?"bi bi-pause-fill":"bi bi-play-fill",this.ids.TOOLBAR_PLAY_BUTTON),this.scene.config.displayTimeline&&e.append(t)}return e}}class F extends Set{static sortIdTuple(e){return e[0]<e[1]?[e[0],e[1]]:[e[1],e[0]]}addIdTuple(e){return super.add(F.sortIdTuple(e).join(","))}hasIdTuple(e){return super.has(F.sortIdTuple(e).join(","))}}class V extends A{forEachPropWithPosition(e){this.propCtx.filteredProps.forEach((t=>{const s=this.propCtx.getPropPositionByCurrentFrame(t);s&&e(t,s)}))}}class N extends V{afterConstructor(){this.connections=l(new F)}listen(){return[this.propCtx.propsState,this.propCtx.selectedPropTypesState,this.propCtx.searchPropValueState]}actions(){return[[this.propCtx.selectedPropState,(e,t)=>{if(e){const t=$(`#${this.idCtx.VIEW_PROP(e)}`);t&&t.removeClass("view__prop--selected")}if(t){const e=$(`#${this.idCtx.VIEW_PROP(t)}`);e&&(e.removeClass("view__prop--not-selected"),e.addClass("view__prop--selected"))}}],[this.propCtx.currentFrameState,(e,t)=>{this.propCtx.filteredProps.forEach((s=>{let i=s.frameAnimationConfig[t],n=i&&!i.hide;i=this.propCtx.getPropPositionByFrame(s,t,t<e);const o=document.getElementById(this.idCtx.VIEW_PROP(s));o.style.display=n?"unset":"none";const r=document.getElementById(this.idCtx.VIEW_ICON_PATH_GROUP_ENABLED(s)),a=document.getElementById(this.idCtx.VIEW_ICON_PATH_GROUP_DISABLED(s)),c=o.querySelector("image");let l;r&&(r.style.opacity=i.enabled?"1":"0"),a&&(a.style.opacity=i.enabled?"0":"1"),c&&i.thumbnail&&(i.thumbnail.height&&c.setAttributeNS(null,"height",String(i.thumbnail.height)),i.thumbnail.width&&c.setAttributeNS(null,"width",String(i.thumbnail.width))),o.setAttribute("transform",`translate(${i.x}, ${i.y}) rotate(${i.degree}) scale(${i.scaleX} ${i.scaleY})`),l=this.propCtx.ifJumpOne(e,t)?this.scene.getFrameSeconds(e)+"s":this.scene.config.frameSelectionSpeed+"s",E("transitionDuration",l,r,a,o,c);const d=this.propCtx.getPropPositionByFrame(s,e,!1);d&&E("transitionTimingFunction",d.transitionTimingFunction,r,a,o,c)}))}]]}renderInIds(){return[this.ids.ROOT_VIEW]}applyViewportAttrs(e){const t=this.scene.$(".view-svg");t.attr("viewBox",`${-this.getViewportCtx().x} ${-this.getViewportCtx().y} ${t.width()*this.getViewportCtx().scale} ${t.height()*this.getViewportCtx().scale}`),e||this.scene.$(".view__prop").each(((e,t)=>{const s=this.propCtx.getPropById(this.idCtx.extractIdType(t.id)[0]);if(s.shouldDisplayName){const e=this.propCtx.getPropPositionByCurrentFrame(s),i=t.querySelector("text"),n=document.getElementById(this.idCtx.VIEW_ICON_PATH_GROUP(s,e.enabled?"enabled":"disabled")),o=t.querySelector("image");if(i){const e=i.getBBox().width,t=i.getBBox().height,r=o?o.getBBox():n.getBBox();let a,c,l=r.width/2-e/2,d=r.height/2+t/2;switch(s.namePosition){case"top":c=-7,a=l;break;case"bottom":c=r.height+t+7,a=l;break;case"left":c=d,a=Math.floor(-e-r.width);break;case"right":c=d,a=Math.floor(r.width+7);break;case"center":c=d,a=l}i.setAttribute("y",String(s.nameYOffset+c)),i.setAttribute("x",String(s.nameXOffset+a)),i.setAttribute("transform",`scale(${s.nameScale} ${s.nameScale})`)}else s.type,r.STORYBOARD}}))}resetViewport(e){this.getViewportCtx().resetViewport(e),this.applyViewportAttrs()}afterRender(){this.mouse={x:0,y:0},this.dragging=!1,this.resetViewport();const e=e=>{this.dragging&&(e.preventDefault(),this.dragging=!1,$("#"+this.ids.ROOT_VIEW).css("cursor","unset"))},t=e=>{const t=$("#"+this.ids.ROOT_VIEW),s=null==e.touches?e.clientX:e.touches[0].pageX,i=null==e.touches?e.clientY:e.touches[0].pageY;return{x:s-t[0].getBoundingClientRect().left,y:i-t[0].getBoundingClientRect().top}};$("#"+this.ids.ROOT_VIEW).on("mousedown touchstart",(e=>{e.preventDefault(),this.dragging=!0;const s=$("#"+this.ids.ROOT_VIEW);this.mouse=t(e),s.css("cursor","grabbing")})).on("mousemove touchmove",(e=>{if(e.preventDefault(),this.dragging){const s=this.getViewportCtx().offset,i=Object.assign({},this.mouse),n=t(e);this.mouse=n,this.getViewportCtx().offset={x:s.x+n.x-i.x,y:s.y+n.y-i.y},this.applyViewportAttrs(!0)}})).on("mouseup mouseleave touchend touchcancel",(t=>{e(t)})).on("wheel",(e=>{e.preventDefault(),e.originalEvent.deltaY>0?this.getViewportCtx().zoomIn():this.getViewportCtx().zoomOut(),this.applyViewportAttrs(!0)})),this.scene.$(".view__prop").on("click touchend",(e=>{const t=e.target.id?e.target.id:e.target.parentElement.id;let[s]=this.idCtx.extractIdType(t);this.propCtx.toggleSelected(s)}))}createConnections(){let e=[...this.connections.get()].map((e=>{const t=e.split(",").map((e=>Number(e))),s=this.propCtx.getPropById(t[0]),i=this.propCtx.getPropById(t[1]),n=document.getElementById(this.idCtx.VIEW_GROUP(s)),o=document.getElementById(this.idCtx.VIEW_GROUP(i)),r=this.propCtx.getPropPositionByCurrentFrame(s),a=this.propCtx.getPropPositionByCurrentFrame(i),c=n.querySelector("text").getBoundingClientRect(),l=o.querySelector("text").getBoundingClientRect();return`<g stroke-width="1" stroke="red"><path d="M${r.x+c.width/2} ${r.y+c.height/2} L${a.x+l.width/2} ${a.y+l.height/2}"/></g>\n<g class="view__prop__connection"><path d="M${r.x} ${r.y} L${a.x} ${a.y}"/></g>`}));document.getElementById(this.ids.VIEW_CONNECTIONS).innerHTML=e.join("")}render(){const e=[];this.scene.config.lines.forEach((([t,s,i])=>{e.push(P(t.x,t.y,s.x,s.y,i.width,i.color))}));let t=[];this.forEachPropWithPosition(((e,s)=>{var i;const n=s.hide;if(s){const o=this.propCtx.isPropSelected(e),a=document.createElementNS("http://www.w3.org/2000/svg","g");if(a.classList.add("view__prop",o?"view__prop--selected":"view__prop--not-selected"),a.style.transitionTimingFunction=s.transitionTimingFunction,a.id=this.idCtx.VIEW_GROUP(e),a.setAttribute("transform",`translate(${s.x}, ${s.y}) rotate(${s.degree}) scale(${s.scaleX} ${s.scaleY})`),e.type===r.STORYBOARD){if(s.thumbnail){const e=document.createElementNS("http://www.w3.org/2000/svg","image");null==s.thumbnail.width&&null==s.thumbnail.height&&(s.thumbnail.width=50),s.thumbnail.height&&e.setAttributeNS(null,"height",String(s.thumbnail.height)),s.thumbnail.width&&e.setAttributeNS(null,"width",String(s.thumbnail.width)),e.setAttributeNS("http://www.w3.org/1999/xlink","href",s.thumbnail.imageURL),e.setAttributeNS(null,"x",String(s.x)),e.setAttributeNS(null,"y",String(s.y)),a.append(e)}}else{const t=S(this.propCtx.propTypePool[e.type][e.style].enabledPaths),s=S(this.propCtx.propTypePool[e.type][e.style].disabledPaths);t.id=this.idCtx.VIEW_ICON_PATH_GROUP_ENABLED(e),s.id=this.idCtx.VIEW_ICON_PATH_GROUP_DISABLED(e),this.propCtx.isPropEnabled(e)?s.style.opacity="0":t.style.opacity="0",a.append(t,s)}if(e.shouldDisplayName){const t=document.createElement("text");t.id=this.idCtx.VIEW_PROP_TEXT(e),t.innerText=e.name,t.style.fill=null!==(i=e.nameColor)&&void 0!==i?i:e.color,a.appendChild(t)}n&&(a.style.display="none"),t.push(a.outerHTML)}}));for(let e in this.scene.config.attachment){const t=this.propCtx.getPropsByName(e);let s=[];this.scene.config.attachment[e].forEach((e=>{s=s.concat(this.propCtx.getPropsByName(e))})),t.forEach((e=>{s.forEach((t=>{e!==t&&this.connections.get().addIdTuple([e.id,t.id])}))}))}return`<svg class="view-svg" xmlns="http://www.w3.org/2000/svg"><g id="${this.ids.VIEW_CONNECTIONS}"></g>${t.join("")}\n<g id="${this.ids.VIEW_LINES_GROUP}">${e.join("")}</g></svg>`}}const z={defaultTheme:"dark",themeScope:"container",dialog:"embedded",viewOffset:.2,transitionTimingFunction:"linear",frameSpeed:{},attachment:{},defaultFrameSpeed:1,frameSelectionSpeed:1,defaultOpenPropList:!0,defaultOpenToolbar:!0,propTypes:{},lines:[],alwaysShowAllDialogTabs:!1,props:[],renderMethod:"canvas",zoomLowerBound:.15,zoomUpperBound:2,zoomFactor:1.02,dialogShowAllProperties:!1,dialogAllPropertiesFormat:"json",customThemes:{},displayToolbar:!0,displayPropList:!0,displayTimeline:!0};class k extends A{constructor(){super(...arguments),this.timeouts=[]}actions(){return[[this.snackbarCtx.snackbarState,(e,t)=>{const s=document.getElementById(this.ids.SNACKBAR),i=s.querySelector("span");s.classList.remove("snackbar--closed"),this.snackbarCtx.isError?(s.classList.remove("snackbar--success"),s.classList.add("snackbar--error")):(s.classList.add("snackbar--success"),s.classList.remove("snackbar--error")),i.innerText=t,this.timeouts.forEach((e=>{clearTimeout(e)})),this.timeouts.push(setTimeout((()=>{s.classList.add("snackbar--closed")}),4e3))}]]}renderInIds(){return[this.ids.ROOT_SNACKBAR]}afterRender(){}render(){return`<div class='snackbar snackbar--closed ${this.scene.isRootMobile()?"snackbar--mobile":"snackbar--normal"} ${this.snackbarCtx.isError?"snackbar--error":"snackbar--success"}' id="${this.ids.SNACKBAR}"><span></span></div>`}}class D extends A{renderInIds(){return[this.ids.ROOT_OVERLAY]}listen(){return[this.overlayCtx.overlayOpenState,this.overlayCtx.overlayHTMLState]}afterRender(){const e=document.getElementById(this.ids.OVERLAY);e&&(e.onclick=t=>{t.target===e&&this.overlayCtx.close()},this.scene.$(".modal__header__close").on("click",(()=>{this.overlayCtx.close()})),this.overlayCtx.overlayAfterRender())}render(){return this.overlayCtx.overlayOpen?`<div class='overlay' id="${this.ids.OVERLAY}">\n        ${this.overlayCtx.overlayHTML}\n        </div>`:""}}class G{constructor(e){this.scene=e,this.themeCtx=e.themeCtx,this.config=e.config}}class U extends G{constructor(e){super(e),this.currentFrameState=l(1),this.totalFramesState=l(0),this.selectedPropState=l(),this.propsState=l([]),this.propIds=0,this.selectedPropTypesState=l([]),this.searchPropValueState=l(""),this.propTypePool=Object.assign({},a)}get searchValue(){return this.searchPropValueState.get()}set searchValue(e){this.searchPropValueState.set(e)}toggleSelectedPropType(e){this.isPropTypeSelected(e)?this.selectedPropTypesState.set(this.selectedPropTypes.filter((t=>t!==e))):this.selectedPropTypesState.set([...this.selectedPropTypes,e])}isPropTypeSelected(e){return this.selectedPropTypes.includes(e.toUpperCase())}resetSelectedPropTypes(){this.selectedPropTypesState.set(this.allPropTypes)}get allPropTypes(){return Object.keys(this.propTypePool)}get selectedPropTypes(){return this.selectedPropTypesState.get()}clearSelectedProp(){this.selectedPropState.set(null)}get props(){return this.propsState.get()}get filteredProps(){return this.props.filter((e=>this.selectedPropTypes.includes(e.type)&&(!this.searchValue||e.name.toLowerCase().includes(this.searchValue.toLowerCase()))))}addPropType(e){this.propTypePool=Object.assign(Object.assign({},this.propTypePool),e)}sortPropsByRenderOrder(){this.propsState.set(this.propsState.get().sort(((e,t)=>e.orderIndex<t.orderIndex?-1:e.orderIndex>t.orderIndex?1:0)))}isPropEnabled(e){return this.getPropPositionByCurrentFrame(e).enabled}getPropPositionByCurrentFrame(e){return this.getPropPositionByFrame(e,this.currentFrame,!1)}getPropById(e){for(const t of this.propsState.get())if(t.id===e)return t;return null}getPropsByName(e){const t=[];for(const s of this.propsState.get())s.name.toLowerCase()===e.toLowerCase()&&t.push(s);return t}addProp(...e){const t=[...this.propsState.get()];return e.forEach((e=>{var i,o,r;if((e=Object.assign(Object.assign({},n),e)).color=null!==(i=e.color)&&void 0!==i?i:this.themeCtx.currentTheme.isLight?g():f(),e.id=null!==(o=e.id)&&void 0!==o?o:this.propIds,e.name=null!==(r=e.name)&&void 0!==r?r:`${d(e.type)} ${e.id}`,e.frameAnimationConfig){e.frameAnimationConfig;for(let t in e.frameAnimationConfig){const i=Object.assign(Object.assign({},s),e.frameAnimationConfig[t]);i.transitionTimingFunction=i.transitionTimingFunction||this.config.transitionTimingFunction,e.frameAnimationConfig[t]=i}}this.propIds+=1,t.push(e)})),this.propsState.set(t),this}findMaxFrames(){let e=0;return this.propsState.get().forEach((t=>{const s=t.frameAnimationConfig,i=Number(Object.keys(s).reduce(((e,t)=>s[e]>s[t]?e:t)));i>e&&(e=i)})),e}toggleSelected(e){let t;t="number"==typeof e?this.getPropById(e):e,t===this.selectedProp?this.clearSelectedProp():this.selectedProp=t}getPropPositionByFrame(e,t,s){var i;const n=s=>{let i;const n=e.frameAnimationConfig;if(n)if(n[t])i=n[t];else{let e=-1;for(let i in n){const n=Number(i);s?n>t&&(-1===e||Math.abs(n-t)<e)&&(e=n):n<t&&(-1===e||Math.abs(n-t)<e)&&(e=n)}i=n[e]}return i},o=null!==(i=n(s))&&void 0!==i?i:n(!s);return o?Object.assign({},o):null}isPropSelected(e){const t=this.selectedProp,s="number"==typeof e?e:e.id;return t&&t.id===s}get selectedProp(){return this.selectedPropState.get()}set selectedProp(e){this.selectedPropState.set(e)}getPropSpanText(e,t){return v(e.name,t||e.color)}getPropSVG(e,t,s){s=s||1.4;const i=this.getPathGroup(e,t);if(i){const e=T(s);return e.append(i),e}return document.createElement("div")}getPathGroup(e,t){const s="string"==typeof e,i=s?e:e.type,n=s?"default":e.style,o=s||this.isPropEnabled(e)?"enabledPaths":"disabledPaths",r=this.propTypePool[i][n]?this.propTypePool[i][n][o]:null;return r?S(r):null}get isStatic(){return this.totalFrames<=1}get totalFrames(){return this.totalFramesState.get()}set totalFrames(e){this.totalFramesState.set(e)}get currentFrame(){return this.currentFrameState.get()}set currentFrame(e){this.currentFrameState.set(e)}ifJumpOne(e,t){return t-e==1||1===t&&e===this.totalFrames}ifJumpOneLiterally(e,t){return t-e==1}nextFrame(){const e=this.currentFrame;return this.currentFrame<this.totalFrames?this.currentFrame++:this.currentFrame===this.totalFrames&&(this.currentFrame=1),e}}class j extends G{constructor(e){super(e),this.offsetState=l({x:0,y:0}),this.scaleState=l(.75)}findMinMaxPosition(e){let[t,s,i,n]=[null,null,null,null];const o=e=>{(e.x>i||null==i)&&(i=e.x),(e.y>n||null==n)&&(n=e.y),(e.x<t||null==t)&&(t=e.x),(e.y<s||null==s)&&(s=e.y)};return this.scene.propCtx.props.forEach((t=>{if(e)o(this.scene.propCtx.getPropPositionByCurrentFrame(t));else for(let e in t.frameAnimationConfig){const s=t.frameAnimationConfig[e];s&&o(s)}})),[t,s,i,n]}calcViewBox([e,t,s,i]){const n=$(`${this.scene.rootContainerIdSymbol}`),o=(s-e)/n.width(),r=(i-t)/n.height();let a=o>r?o:r;return a+=this.config.viewOffset,[a,e-this.config.viewOffset/2*n.width(),t-this.config.viewOffset/2*n.height()]}resetViewport(e){const[t,s,i]=this.calcViewBox(this.findMinMaxPosition(e));this.scale=t,this.offset={x:-s,y:-i}}get offset(){return this.offsetState.get()}set offset(e){this.offsetState.set(e)}get scale(){return this.scaleState.get()}set scale(e){e>this.config.zoomLowerBound&&e<this.config.zoomUpperBound&&this.scaleState.set(e)}get x(){return this.offset.x}get y(){return this.offset.y}zoomIn(){this.scale=this.scale*this.config.zoomFactor}zoomOut(){this.scale=this.scale*(1/this.config.zoomFactor)}}class q{constructor(){this.snackbarMessageState=l(""),this.error=!1}get isError(){return this.error}get snackbarState(){return this.snackbarMessageState}snackbar(e,t=!1){this.error=t,this.snackbarMessageState.set(e,!0)}}class W{constructor(){this.overlayOpenState=l(!1),this.overlayHTMLState=l(""),this.overlayAfterRender=()=>{}}get overlayHTML(){return this.overlayHTMLState.get()}get overlayOpen(){return this.overlayOpenState.get()}close(){this.overlayOpenState.set(!1)}openWith(e,t=(()=>{})){this.overlayAfterRender=t,this.overlayOpenState.set(!0),this.overlayHTMLState.set(e)}}class Y extends V{afterRender(){}render(){return`<canvas width="${Math.floor(this.scene.getRootWidth())}" height="${Math.floor(this.scene.getRootHeight())}"\n        id="${this.ids.CANVAS}"></canvas>`}resetViewport(e){}}const K={ROOT_SNACKBAR:["snackbar","root__container"],ROOT_PROP_LIST:["prop__list","root__container"],ROOT_PROP_DIALOG:["prop__property","root__container"],ROOT_VIEW:["view","root__container"],ROOT_FOOTER:["footer","root__container"],ROOT_OVERLAY:["overlay","root__container"],VIEW_ICON_PATH_GROUP:["view","prop","icon","group"],VIEW_ICON_PATH_GROUP_ENABLED:["view","prop","icon","group","enabled"],VIEW_ICON_PATH_GROUP_DISABLED:["view","prop","icon","group","disabled"],VIEW_PROP_TEXT:["view","prop","text"],VIEW_GROUP:["view","prop"],VIEW_CONNECTIONS:["view","connections"],VIEW_LINES_GROUP:["view","lines","group"],VIEW_PROP:["view","prop"],OVERLAY:["overlay"],FRAME_PROGRESS_FINISHED:["frame","progress","finished"],FRAME_PROGRESS_UNFINISHED:["frame","progress","unfinished"],TIMELINE_FRAME:["timeline","frame"],TOOLBAR:["toolbar"],TOOLBAR_PLAY_BUTTON:["toolbar","play"],TOOLBAR_FULLSCREEN:["toolbar","fullscreen"],TOOLBAR_COLLAPSE_BUTTON:["toolbar","collapse"],TOOLBAR_RESET_CURRENT_BUTTON:["toolbar","reset","current"],TOOLBAR_RESET_FRAMES_BUTTON:["toolbar","reset","frames"],TOOLBAR_EXPORT_BUTTON:["toolbar","export"],TOOLBAR_THEME_BUTTON:["toolbar","theme"],PROP_DIALOG_CLOSE_ICON:["prop","dialog","property"],PROP_DIALOG_FOOTER_ICON:["prop","dialog","property","icon"],PROP_DIALOG_FOOTER_POSITION:["prop","dialog","footer","position"],PROP_DIALOG_FOOTER_SCALE:["prop","dialog","footer","scale"],PROP_DIALOG_HEADER_TAB:["dialog"],PROP_LIST:["prop","list"],PROP_LIST_HIDE:["prop","list","hide"],PROP_LIST_RESET_BUTTON:["prop","list","reset"],PROP_LIST_DIALOG_BUTTON:["prop","list","open","dialog"],PROP_LIST_HIDE_ICON:["prop","list","hide","icon"],SNACKBAR:["snackbar"],CANVAS:["canvas"],PROP_TYPE_TOGGLE:["prop","type","toggle"],PROP_SEARCH_INPUT:["prop","search","input"],PROP_FILTERED_LIST:["prop","filtered","list"]};class X{constructor(){this.contextId=X.contextIds,X.contextIds+=1;for(let e in K)this[e]=(t,...s)=>this.getId(t,...s,...K[e])}getType(...e){return this.getId(null,...e)}getId(e,...t){t.sort(((e,t)=>e.localeCompare(t)));const s=null==e?"":"number"==typeof e?"-"+e:null===e.id?"":"-"+e.id;return`${this.contextId}-${t.join("-")}${s}`}extractIdType(e,...t){const s=e.match(/-\d+/),i=e.match(/\d+-/);if(!i||parseInt(i[0].replace("-",""))!=this.contextId)return[-1,[]];let n=-1;return s&&(n=parseInt(s[0].replace("-",""))),[n,e.replace(/-\d+/,"").replace(/\d+-/,"").split("-").filter((e=>!t.includes(e)))]}}X.contextIds=0;class J extends A{listen(){return[this.propCtx.propsState,this.propCtx.selectedPropTypesState]}actions(){return[[this.propCtx.searchPropValueState,()=>{},()=>{this.renderFilteredProps()}]]}renderInIds(){return[this.ids.OVERLAY]}afterRender(){this.renderFilteredProps();const e=this.propCtx;this.scene.$(".list__items__item").on("click",(e=>{const[t,s]=this.idCtx.extractIdType(e.currentTarget.id,...K.PROP_TYPE_TOGGLE);s&&s.length>0&&this.propCtx.toggleSelectedPropType(s[0])})),this.scene.$(`#${this.ids.PROP_SEARCH_INPUT}`).on("input",(function(t){e.searchValue=$(this).val().toString()}))}static createTitle(e){const t=document.createElement("div");return t.innerText=e,t.classList.add("filter__modal__title"),t}static createListContainer(){const e=document.createElement("div");return e.classList.add("list__items"),e}renderFilteredProps(){const e=document.getElementById(this.ids.PROP_FILTERED_LIST);e.innerHTML="",this.propCtx.filteredProps.forEach((t=>{const s=document.createElement("div");s.classList.add("list__items__item");const i=this.propCtx.getPropSpanText(t),n=this.propCtx.getPropSVG(t,null,1);s.append(i,n),e.append(s)}))}render(){const e=document.createElement("div");e.classList.add("filter__modal__container");const t=document.createElement("div");t.classList.add("input__box");const s=J.createListContainer();this.propCtx.allPropTypes.forEach((e=>{const t=document.createElement("div");t.classList.add("list__items__item"),this.propCtx.isPropTypeSelected(e)?t.classList.add("list__items__item--selected"):t.classList.add("list__items__item--not-selected");const i=document.createElement("span");i.innerText=e;const n=this.propCtx.getPropSVG(e,"white",1);t.append(i,n),t.id=this.idCtx.PROP_TYPE_TOGGLE(null,e),s.append(t)}));const i=document.createElement("div");i.classList.add("textfield");const n=J.createTitle("Search Prop Name");n.classList.add("textfield__label");const o=document.createElement("input");o.classList.add("input__box","textfield__input"),o.setAttribute("value",this.propCtx.searchValue),o.id=this.ids.PROP_SEARCH_INPUT,i.append(n,o),t.append(J.createTitle("Select Prop Types"),s);const r=document.createElement("div");r.classList.add("input__box");const a=J.createListContainer();return a.id=this.ids.PROP_FILTERED_LIST,r.append(J.createTitle("Filtered Props"),a),e.append(i,t,r),I("Filter Props",e)}}class Z extends A{afterConstructor(){this.open=l(!0)}listen(){return[this.propCtx.propsState,this.propCtx.selectedPropTypesState,this.propCtx.searchPropValueState]}actions(){return[[this.open,(e,t)=>{const s=this.scene.getRootDocument().querySelector(".prop__list-container"),i=this.scene.getRootDocument().querySelector(".hide__icon-rotate-container");t?(s.classList.remove("prop__list-container--closed"),i.classList.remove("icon-animated-right"),i.classList.add("icon-animated-left")):(s.classList.add("prop__list-container--closed"),i.classList.remove("icon-animated-left"),i.classList.add("icon-animated-right"))}],[this.propCtx.selectedPropState,(e,t)=>{const s=document.getElementById(this.idCtx.PROP_LIST(t));this.propCtx.props.forEach((e=>{const t=document.getElementById(this.idCtx.PROP_LIST(e));t&&(t.classList.add("prop__list__item--not-selected"),t.classList.remove("prop__list__item--selected"),t.querySelector("span").style.color=e.color,t.querySelectorAll("path").forEach((t=>{t.style.fill=e.color})))})),s&&(s.classList.remove("prop__list__item--not-selected"),s.classList.add("prop__list__item--selected"),s.querySelector("span").style.color="var(--scene-base)",s.querySelectorAll("path").forEach((e=>{e.style.fill="var(--scene-base)"})))}]]}renderInIds(){return[this.ids.ROOT_PROP_LIST]}afterRender(){this.open.set(this.scene.config.defaultOpenPropList),this.scene.$(".prop__list__item").on("click",(e=>{const[t]=this.idCtx.extractIdType(e.currentTarget.id);this.propCtx.toggleSelected(t)})),this.scene.$("#"+this.ids.PROP_LIST_HIDE).on("click",(()=>{this.open.set(!this.open.get())})),this.scene.$("#"+this.ids.PROP_LIST_DIALOG_BUTTON).on("click",(()=>{this.overlayCtx.openWith(""),new J(this.scene).renderComponent()}))}render(){const e=document.createElement("div");e.classList.add("prop__column");const t=document.createElement("div");t.classList.add("prop__list");const s=(e,t)=>{const s=document.createElement("div");s.classList.add("prop__list__bottom__button"),s.id=t;const i=document.createElement("span");return i.innerText=e,s.append(i),s},i=s("Filter",this.ids.PROP_LIST_DIALOG_BUTTON),n=s("Reset",this.ids.PROP_LIST_RESET_BUTTON),o=document.createElement("div");o.classList.add("prop__list__bottom__container"),o.append(i,n),e.append(o),e.append(t);const r=document.createElement("div");r.id=this.ids.PROP_LIST_HIDE;const a=document.createElement("div");a.classList.add("icon-animated-left","hide__icon-rotate-container");const c=b(this.ids.PROP_LIST_HIDE_ICON,"bi","bi-arrow-bar-left");return a.append(c),r.append(a),r.classList.add("hide__icon-container","pointer"),this.propCtx.filteredProps.forEach((e=>{const s=this.propCtx.isPropSelected(e)?"var(--scene-base)":e.color,i=document.createElement("div");i.id=this.idCtx.PROP_LIST(e),i.classList.add("pointer","prop__list__item",this.propCtx.isPropSelected(e)?"prop__list__item--selected":"prop__list__item--not-selected");const n=this.propCtx.getPropSVG(e,s,1.3),o=this.propCtx.getPropSpanText(e,s);i.append(n,o),t.append(i)})),e.outerHTML+r.outerHTML}}const Q={light:{isLight:!0,colors:{"--scene-base":"#ffffff","--scene-base-s1":"#F5F5F5","--scene-base-inv":"#000000","--scene-base-inv-s1":"#1c1c1c","--scene-base-inv-s2":"#696969","--scene-dialog-header-button-not-selected-hover":"#6565a1","--scene-dialog-header-button-not-selected-text-hover":"#6565a1","--scene-snackbar-error":"#EB7777","--scene-snackbar-success":"#49655E","--scene-timeline-button-selected":"#8688BC","--scene-timeline-button-selected-hover":"#6565a1","--scene-timeline-button-not-selected":"#EB7777","--scene-timeline-button-not-selected-hover":"#d96262","--scene-timeline-button-text":"#ffffff","--scene-snackbar-text":"#ffffff","--scene-dialog-key":"#6565a1","--scene-dialog-value":"#EB7777","--scene-dialog-content":"#000000","--scene-button-text":"#ffffff","--scene-button-color":"#8688BC","--scene-button-hover":"#6565a1","--scene-trans-base":"rgba(255, 255, 255, 0.92)"},icon:"bi bi-brightness-high"},dark:{isLight:!1,colors:{"--scene-base":"#000000","--scene-base-s1":"#2c2c2c","--scene-base-inv":"#ffffff","--scene-base-inv-s1":"#efefef","--scene-base-inv-s2":"#b4b4b4","--scene-dialog-header-button-not-selected-hover":"#a3a3c7","--scene-dialog-header-button-not-selected-text-hover":"#a3a3c7","--scene-snackbar-error":"#EB7777","--scene-snackbar-success":"#49655E","--scene-timeline-button-selected":"#8688BC","--scene-timeline-button-selected-hover":"#6565a1","--scene-timeline-button-not-selected":"#EB7777","--scene-timeline-button-not-selected-hover":"#d96262","--scene-timeline-button-text":"#ffffff","--scene-snackbar-text":"#ffffff","--scene-dialog-key":"#a3a3c7","--scene-dialog-value":"#ea9090","--scene-dialog-content":"#ffffff","--scene-button-text":"#ffffff","--scene-button-color":"#8688BC","--scene-button-hover":"#6565a1","--scene-trans-base":"rgba(40,40,40,0.92)"},icon:"bi bi-moon-stars-fill"},"dark-classic":{isLight:!1,colors:{"--scene-base":"#000000","--scene-base-s1":"#2c2c2c","--scene-base-inv":"#ffffff","--scene-base-inv-s1":"#efefef","--scene-base-inv-s2":"#b4b4b4","--scene-dialog-header-button-not-selected-hover":"#9ab999","--scene-dialog-header-button-not-selected-text-hover":"#9ab999","--scene-snackbar-error":"#EB7777","--scene-snackbar-success":"#49655E","--scene-timeline-button-selected":"#375d7e","--scene-timeline-button-selected-hover":"#513c66","--scene-timeline-button-not-selected":"#6d5c7c","--scene-timeline-button-not-selected-hover":"#c06d85","--scene-timeline-button-text":"#ffffff","--scene-snackbar-text":"#ffffff","--scene-dialog-key":"#4c87b5","--scene-dialog-value":"#ff6a79","--scene-dialog-content":"#ffffff","--scene-button-text":"#ffffff","--scene-button-color":"#46aea9","--scene-button-hover":"#557a81","--scene-trans-base":"rgba(40,40,40,0.92)"},icon:"bi bi-balloon-heart-fill"}};class ee{constructor(e,t,s){this._context=e,this._themeKeys=[...Object.keys(t)],this._themes=t;let i=0;s&&(s=s.toLowerCase(),this._themeKeys.includes(s)&&(i=this._themeKeys.indexOf(s))),this._current=l(i),this.renderTheme()}get currentState(){return this._current}get currentTheme(){return this._themes[this._themeKeys[this._current.get()]]}get nextTheme(){return this.getThemeByIndex(this.nextThemeIndex)}renderTheme(){const e=this.currentTheme.colors,t="root"===this._context.config.themeScope?document.documentElement:this._context.getRootDocument();for(let s in e)t.style.setProperty(s,e[s])}getThemeByIndex(e){return this._themes[this.getThemeName(e)]}getThemeName(e){return this._themeKeys[e]}getNextThemeIndex(e){let t=e+1;return t>=this._themeKeys.length&&(t=0),t}get themeToDisplay(){return`${this.getThemeName(this._current.get())} -> ${this.getThemeName(this.nextThemeIndex)}`}get nextThemeIndex(){return this.getNextThemeIndex(this._current.get())}next(){this._current.set(this.nextThemeIndex),this.renderTheme()}}class te{constructor(e,t){var s,n;this.viewportsState=l([]),this.snackbarCtx=new q,this.overlayCtx=new W,[this.ids,this.idContext]=function(){const e=new X;return[new Proxy(K,{get(t,s,i){var n;if(Reflect.has(t,s)){const o="string"==typeof s&&null!==(n=K[s])&&void 0!==n?n:Reflect.get(t,s,i);return Array.isArray(o)?e.getId(null,...o):o}return null}}),e]}(),this.rootContainerId=e,this.rootContainerIdSymbol="#"+this.rootContainerId,this.config=t?Object.assign(Object.assign({},z),t):Object.assign({},z),this.config.lines.forEach((e=>{e[2]=Object.assign(Object.assign({},i),e[2])})),console.log(this.config),this.themeCtx=(this,s=Object.assign(Object.assign({},Q),this.config.customThemes),n=this.config.defaultTheme,new ee(this,s,n)),this.propCtx=new U(this),this.propCtx.addPropType(t.propTypes),this.config.props.forEach((e=>{this.propCtx.addProp(e)}))}getRootDocument(){return document.getElementById(this.rootContainerId)}getRootWidth(){return this.getRootDocument().getBoundingClientRect().width}getRootHeight(){return this.getRootDocument().getBoundingClientRect().height}isRootMobile(){return this.getRootWidth()<500}getFrameSeconds(e){return e in this.config.frameSpeed?this.config.frameSpeed[e]:this.config.defaultFrameSpeed}getViewportGetter(){return()=>this.viewportsState.get()[0]}beforeDisplay(){this.propCtx.totalFrames=this.propCtx.findMaxFrames();const e=[];for(let t=0;t<=this.propCtx.totalFrames;t++){const t=new j(this);e.push(t)}this.viewportsState.set(e),this.propCtx.sortPropsByRenderOrder(),this.propCtx.resetSelectedPropTypes()}register(...e){const t=[];return e.forEach((e=>{const s=new e(this);s.renderComponent(),t.push(s)})),t}$(e){return $(`${this.rootContainerIdSymbol} ${e}`)}display(){this.beforeDisplay(),$((()=>{$(`${this.rootContainerIdSymbol}`).addClass("root-container").html(`<div id="${this.ids.ROOT_SNACKBAR}" class='snackbar-container'></div>\n                                     <div id="${this.ids.ROOT_PROP_LIST}" class='prop__list-container'></div>\n                                    <div id="${this.ids.ROOT_PROP_DIALOG}" class='prop__property-container'></div>\n                                    <div id="${this.ids.ROOT_VIEW}" class='view-container'></div>\n                                    <div id="${this.ids.ROOT_FOOTER}" class="footer-container"></div>\n                                    <div id="${this.ids.ROOT_OVERLAY}" class="overlay-container"></div>`);const e="canvas"===this.config.renderMethod?Y:N,[t]=this.register(e,B,H,k,D);this.config.displayPropList&&this.register(Z),this.viewComponent=t}))}}function se(e){const t=[{title:"test",imageURL:"https://s2.loli.net/2022/02/10/grldkO4LeDjxmY8.png"},{imageURL:"https://s2.loli.net/2022/03/16/KZw7yAWXudMGL21.png"},{title:"A long picture",imageURL:"https://s2.loli.net/2022/03/16/tukpnVKZaUC7GIF.png"}],s={defaultTheme:"light",customThemes:{"light-custom":{icon:"bi bi-arrow-through-heart-fill",isLight:!0,colors:{"--scene-base":"#ffffff","--scene-base-s1":"#F5F5F5","--scene-base-inv":"#000000","--scene-base-inv-s1":"#1c1c1c","--scene-base-inv-s2":"#696969","--scene-dialog-header-button-not-selected-hover":"#355070","--scene-dialog-header-button-not-selected-text-hover":"#355070","--scene-snackbar":"#F765A3","--scene-timeline-button-selected":"#6d597a","--scene-timeline-button-selected-hover":"#6d597a","--scene-timeline-button-not-selected":"#F765A3","--scene-timeline-button-not-selected-hover":"#ea5490","--scene-timeline-button-text":"#ffffff","--scene-snackbar-text":"#ffffff","--scene-dialog-key":"#6d597a","--scene-dialog-value":"#A155B9","--scene-dialog-content":"#000000","--scene-button-text":"#ffffff","--scene-button-color":"#7ec4ef","--scene-button-hover":"#9cabde","--scene-trans-base":"rgba(255, 255, 255, 0.95)"}}},propTypes:{HOUSE:{default:{enabledPaths:'<path d="M11.251.068a.5.5 0 0 1 .227.58L9.677 6.5H13a.5.5 0 0 1 .364.843l-8 8.5a.5.5 0 0 1-.842-.49L6.323 9.5H3a.5.5 0 0 1-.364-.843l8-8.5a.5.5 0 0 1 .615-.09zM4.157 8.5H7a.5.5 0 0 1 .478.647L6.11 13.59l5.732-6.09H9a.5.5 0 0 1-.478-.647L9.89 2.41 4.157 8.5z"/>',disabledPaths:'<path d="M11.251.068a.5.5 0 0 1 .227.58L9.677 6.5H13a.5.5 0 0 1 .364.843l-8 8.5a.5.5 0 0 1-.842-.49L6.323 9.5H3a.5.5 0 0 1-.364-.843l8-8.5a.5.5 0 0 1 .615-.09z"/>'}}},renderMethod:"svg"},i=()=>{const e=h(8,46)/10;return{enabled:u(),x:750*Math.random(),y:750*Math.random(),degree:360*Math.random(),scaleX:e,scaleY:e}};let n=[...Object.values(r)];n=n.filter((e=>e!=r.STORYBOARD&&e!=r.SCRIPT));const o=e=>{const s=m(n),o={};for(let t=0;t<e;t++)o[t+1]=i();return Object.assign(Object.assign({},(()=>{const e={};return u()&&(e.note="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."),u()&&(e.scripts="Lorem ipsum dolor sit amet, consectetur adipiscing elit,\n123\n\na: c"),u()&&(e.images=t),u()&&(e.steps={3:{title:"Here's step 1",content:"Here's some content"},2:{title:"Here's step 2",content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris"},4:{content:"aha"},5:{title:"A title"},1:{},6:{},7:{}}),e})()),{nameScale:1,type:s,brand:"Random",style:m(Object.keys(a[s])),someValue:5e3,frameAnimationConfig:o,shouldDisplayName:!!h(0,1),namePosition:"top"})},c=document.getElementById(e);let l=0;var d;((e,t,i,n)=>{const o=document.createElement("div");o.id=`root-${l}`;const r=document.createElement("div");r.id=`scene-${l}`,l+=1;const a=document.createElement("p");a.innerText="A random scene\n with walls, slower default frame speed (slower animation speed when users skip frames),\n a dark theme and a director's viewfinder",o.append(a,r),c.append(o),r.style.width=i,r.style.height="800px",new te(r.id,Object.assign(Object.assign({},s),t)).display()})(0,{frameSpeed:(e=>{const t={};for(let e=0;e<6;e++)t[e+1]=h(3,30)/10;return t})(),defaultOpenPropList:!0,frameSelectionSpeed:5,lines:[[{x:300,y:-2},{x:300,y:100},{color:"var(--scene-base-inv-s2)",width:3}],[{x:300,y:98},{x:600,y:98},{color:"var(--scene-base-inv-s2)",width:3}],[{x:0,y:0},{x:300,y:0},{color:"var(--scene-base-inv-s2)",width:3}]],props:[...((e,t)=>{const s=[];for(let e=0;e<25;e++)s.push(o(6));return s})(),(d={title:"something",imageURL:"https://s2.loli.net/2022/03/19/iN9yLYWoE28z5MI.jpg",width:300},{type:"STORYBOARD",script:"Some storyboard script",orderIndex:20,namePosition:"bottom",shouldDisplayName:!1,frameAnimationConfig:{1:{x:100,y:100,thumbnail:d,degree:0},2:{x:60,y:60,thumbnail:d,degree:40}},images:t})]},"90vw")}return se("container"),t})()}));